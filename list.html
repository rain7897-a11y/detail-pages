<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<title>제품 상세페이지 목록</title>

<style>
body{
  font-family:system-ui;
  margin:0;
  background:#f5f6f8;
}
.wrap{
  max-width:900px;
  margin:40px auto;
  background:#fff;
  padding:30px;
  border-radius:16px;
  box-shadow:0 10px 30px rgba(0,0,0,.08);
}
h1{margin-top:0}
.item{
  padding:14px 0;
  border-bottom:1px solid #eee;
}
.item a{
  text-decoration:none;
  font-weight:600;
  color:#0a58ca;
}
.item a:hover{ text-decoration:underline }
.top{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:20px;
}
.count{
  font-size:14px;
  color:#666;
}
input{
  padding:8px 12px;
  border-radius:8px;
  border:1px solid #ddd;
}
</style>
</head>

<body>
<div class="wrap">

<div class="top">
<h1>제품 목록</h1>
<div class="count" id="count">불러오는 중...</div>
</div>

<input type="text" id="search" placeholder="제품 검색">

<div id="list"></div>

</div>

<script>

/* =========================
 설정
========================= */

const BASE = "https://detail-pages.pages.dev/";
const API = "https://api.github.com/repos/rain7897-a11y/detail-pages/contents/";

/* =========================
 목록 불러오기
========================= */

fetch(API)
.then(r=>r.json())
.then(files=>{

  const htmlFiles = files.filter(f=>f.name.endsWith(".html"));

  document.getElementById("count").innerText =
  "총 "+htmlFiles.length+"개";

  render(htmlFiles);

  /* 검색 기능 */
  document.getElementById("search").oninput = e=>{
    const v = e.target.value.toLowerCase();
    render(htmlFiles.filter(f=>f.name.toLowerCase().includes(v)));
  }

});


/* =========================
 목록 출력 함수
========================= */

function render(list){

  const box = document.getElementById("list");
  box.innerHTML="";

  list.forEach(file=>{

    const name = file.name
    .replace(".html","")
    .replaceAll("_"," ");

    const div = document.createElement("div");
    div.className="item";

    div.innerHTML = `
      <a href="${BASE+file.name}" target="_blank">
      ${name}
      </a>
    `;

    box.appendChild(div);

  });

}

</script>

</body>
</html>
